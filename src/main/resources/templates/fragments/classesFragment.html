<div class="optional" xmlns:th="http://www.w3.org/1999/xhtml">
    <div id="classesWarning" th:text="${warning}" class="warningMessage"></div>
    <div class="form-group row">
        <label class="col-sm-5 col-form-label">Коэффициент корреляции (от 0 до 1):
        </label>
        <div class="col-sm-2">
            <input class="form-control" type="text" name="classCoef" onkeyup="checkParams()" autocomplete="off"
                   id="classCoef" value="0.9">
        </div>
    </div>

    <div style="color: red" hidden id="error-element" class="col-sm-5 form-group row">

    </div>
    <div class="form-group row">
        <div class="col-sm-3">
            <a id="countClassesButton" class="btn btn-primary" href="#ClustersFile" role="button">Выполнить расчет</a>
        </div>
        <div id="loaderClasses" class="loader" style="width: 30px; height: 30px; border-width: 4px; border-top-width: 4px" hidden="true" >
        </div>
        <div id="fileFinalGroupsDownload" class="col-sm-3" hidden="true" >
            <a href="/downloadGroups">Скачать файл с группами</a>
        </div>
    </div>
</div>
<a name="ClustersFile"></a>

<script>
    $('#errorCalc').click(function() {
        $(".errorClass").attr("hidden",false);
    });

    $('#accurateCalc').click(function() {
        $(".errorClass").attr("hidden",true);
    });
    $('#countClassesButton').click(function() {
        var classCoef = $("input[type=text][name=classCoef]").val();
        $('#error-element').attr("hidden", true);
        if(classCoef===""){
            $('#error-element').html('Заполните все поля');
            $('#error-element').attr("hidden", false);
        }
        else {
            $('#loaderClasses').attr("hidden", false);
            $.ajax({
                url: '/countClasses',
                data: "classCoef=" + classCoef,
                success: function () {
                    $('#loaderClasses').attr("hidden", true);
                    $('#fileFinalGroupsDownload').attr("hidden", false);
                    $('.showGroups').removeAttr('disabled');
                    $('#groupWarning').html('');
                }
            });
        }
    });

</script>